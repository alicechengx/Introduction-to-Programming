# ğŸ•¸ï¸ Graph Theory Summary

# å›¾ç®—æ³•é€‰æ‹©å†³ç­–æŒ‡å—

## ä¸€ã€æ ¸å¿ƒåˆ¤æ–­ç»´åº¦

### 1. æŸ¥è¯¢èŒƒå›´
- **å•æºæŸ¥è¯¢**ï¼šåªéœ€è¦ä»ä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªç‚¹å‡ºå‘
- **å…¨å±€æŸ¥è¯¢**ï¼šéœ€è¦ä»æ‰€æœ‰ç‚¹/å¤§é‡ç‚¹å‡ºå‘

### 2. å›¾çš„æ€§è´¨
- **æœ‰å‘æ— ç¯å›¾(DAG)**ï¼šæœ‰æ‹“æ‰‘åº
- **ä¸€èˆ¬å›¾**ï¼šå¯èƒ½æœ‰ç¯

### 3. æ•°æ®è§„æ¨¡ä¸æ€§èƒ½è¦æ±‚
- ç‚¹æ•° Nã€è¾¹æ•° M
- æ˜¯å¦éœ€è¦ä½è¿ç®—ä¼˜åŒ–

---

## äºŒã€ç®—æ³•é€‰æ‹©å†³ç­–æ ‘

### åœºæ™¯1ï¼šå•æº/å°‘é‡æºæŸ¥è¯¢

```
é—®é¢˜ï¼šä»ç‚¹ s å‡ºå‘èƒ½åˆ°è¾¾å“ªäº›ç‚¹ï¼Ÿ
      ä»ç‚¹ s åˆ°ç‚¹ t æ˜¯å¦å­˜åœ¨è·¯å¾„ï¼Ÿ
```

**âœ… ä½¿ç”¨ï¼šæ™®é€š DFS/BFS**

```cpp
// DFSç‰ˆæœ¬
bool visited[MAXN];
void dfs(int u) {
    visited[u] = true;
    for (int v : graph[u]) {
        if (!visited[v]) dfs(v);
    }
}

// BFSç‰ˆæœ¬
void bfs(int start) {
    queue<int> q;
    q.push(start);
    visited[start] = true;
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : graph[u]) {
            if (!visited[v]) {
                visited[v] = true;
                q.push(v);
            }
        }
    }
}
```

**æ—¶é—´å¤æ‚åº¦**ï¼šO(N + M)  
**ç©ºé—´å¤æ‚åº¦**ï¼šO(N)  
**é€‚ç”¨åœºæ™¯**ï¼š
- å•æºæœ€çŸ­è·¯ï¼ˆBFSç”¨äºæ— æƒå›¾ï¼‰
- è¿é€šæ€§åˆ¤æ–­
- è·¯å¾„æœç´¢
- å¶å°”æŸ¥è¯¢æŸä¸ªç‚¹çš„å¯è¾¾æ€§

---

### åœºæ™¯2ï¼šå…¨å±€æŸ¥è¯¢ + ä¸€èˆ¬å›¾

```
é—®é¢˜ï¼šæ¯ä¸ªç‚¹åˆ†åˆ«èƒ½åˆ°è¾¾å¤šå°‘ä¸ªç‚¹ï¼Ÿï¼ˆå›¾å¯èƒ½æœ‰ç¯ï¼‰
```

**âœ… ä½¿ç”¨ï¼šDFS/BFS + è®°å¿†åŒ–ï¼ˆä¸ç”¨bitsetï¼‰**

```cpp
vector<int> reachable[MAXN];
bool visited[MAXN];
bool in_stack[MAXN];  // æ£€æµ‹ç¯

void dfs(int u) {
    if (visited[u]) return;
    visited[u] = true;
    in_stack[u] = true;
    
    reachable[u].push_back(u);
    
    for (int v : graph[u]) {
        if (in_stack[v]) continue;  // æœ‰ç¯ï¼Œè·³è¿‡
        dfs(v);
        for (int x : reachable[v]) {
            reachable[u].push_back(x);
        }
    }
    
    in_stack[u] = false;
}
```

**æ—¶é—´å¤æ‚åº¦**ï¼šO(N Ã— M)  
**ä¸ºä»€ä¹ˆä¸ç”¨bitset**ï¼šä¸€èˆ¬å›¾æ²¡æœ‰å¥½çš„å¤„ç†é¡ºåºï¼Œbitsetä¼˜åŠ¿ä¸æ˜æ˜¾  
**é€‚ç”¨åœºæ™¯**ï¼š
- ä¸­å°è§„æ¨¡å›¾ï¼ˆN â‰¤ 5000ï¼‰
- å¯èƒ½æœ‰ç¯çš„å›¾
- éœ€è¦å­˜å‚¨å…·ä½“å¯è¾¾èŠ‚ç‚¹ï¼ˆä¸åªæ˜¯è®¡æ•°ï¼‰

---

### åœºæ™¯3ï¼šå…¨å±€æŸ¥è¯¢ + DAG + å¤§è§„æ¨¡

```
é—®é¢˜ï¼šæ¯ä¸ªç‚¹åˆ†åˆ«èƒ½åˆ°è¾¾å¤šå°‘ä¸ªç‚¹ï¼Ÿï¼ˆDAGï¼ŒN â‰¤ 30000ï¼‰
```

**âœ… ä½¿ç”¨ï¼šæ‹“æ‰‘æ’åº + Bitset**

```cpp
bitset<MAXN> reachable[MAXN];
int indegree[MAXN];

void topoSort() {
    queue<int> q;
    for (int i = 1; i <= n; i++) {
        if (indegree[i] == 0) q.push(i);
        reachable[i][i] = 1;
    }
    
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : graph[u]) {
            reachable[v] |= reachable[u];  // O(N/64)
            if (--indegree[v] == 0) q.push(v);
        }
    }
}
```

**æ—¶é—´å¤æ‚åº¦**ï¼šO(M Ã— N/64)  
**å…³é”®ä¼˜åŠ¿**ï¼š
- æ‹“æ‰‘åºä¿è¯æ¯ä¸ªç‚¹åªå¤„ç†ä¸€æ¬¡
- Bitsetå°†é›†åˆåˆå¹¶ä¼˜åŒ–64å€
- 64å€å¸¸æ•°ä¼˜åŒ–æ˜¯ACå…³é”®ï¼

**é€‚ç”¨åœºæ™¯**ï¼š
- DAGä¸Šçš„ä¼ é€’é—­åŒ…
- å¤§è§„æ¨¡å¯è¾¾æ€§ç»Ÿè®¡
- ä¾èµ–å…³ç³»åˆ†æ

---

### åœºæ™¯4ï¼šå…¨å±€æŸ¥è¯¢ + DAG + éœ€è¦è·¯å¾„ä¿¡æ¯

```
é—®é¢˜ï¼šæ¯ä¸ªç‚¹åˆ°å…¶ä»–ç‚¹çš„æœ€é•¿è·¯å¾„ï¼Ÿæœ€çŸ­è·¯å¾„ï¼Ÿ
```

**âœ… ä½¿ç”¨ï¼šæ‹“æ‰‘æ’åº + DP**

```cpp
int dp[MAXN];  // dp[u] = ä»uå‡ºå‘çš„æœ€é•¿è·¯å¾„

void topoSort() {
    queue<int> q;
    for (int i = 1; i <= n; i++) {
        if (indegree[i] == 0) q.push(i);
    }
    
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : graph[u]) {
            dp[v] = max(dp[v], dp[u] + 1);
            if (--indegree[v] == 0) q.push(v);
        }
    }
}
```

**é€‚ç”¨åœºæ™¯**ï¼š
- DAGæœ€é•¿è·¯/æœ€çŸ­è·¯
- å…³é”®è·¯å¾„
- å·¥ç¨‹è¿›åº¦å®‰æ’

---

## ä¸‰ã€å¿«é€Ÿå†³ç­–è¡¨

| åœºæ™¯ | å›¾ç±»å‹ | è§„æ¨¡ | æŸ¥è¯¢é‡ | æœ€ä½³ç®—æ³• |
|------|--------|------|--------|----------|
| å•ç‚¹å¯è¾¾æ€§ | ä»»æ„ | ä»»æ„ | 1æ¬¡ | **DFS/BFS** |
| å•æºæœ€çŸ­è·¯ | æ— æƒ | ä»»æ„ | 1æ¬¡ | **BFS** |
| å…¨å±€å¯è¾¾æ€§ | ä¸€èˆ¬å›¾ | å°(Nâ‰¤5K) | Næ¬¡ | **DFSè®°å¿†åŒ–** |
| å…¨å±€å¯è¾¾æ€§ | DAG | å¤§(Nâ‰¤3W) | Næ¬¡ | **æ‹“æ‰‘+Bitset** |
| è·¯å¾„é•¿åº¦ | DAG | ä»»æ„ | Næ¬¡ | **æ‹“æ‰‘+DP** |
| å¼ºè¿é€šåˆ†é‡ | æœ‰å‘å›¾ | ä»»æ„ | 1æ¬¡ | **Tarjan/Kosaraju** |
| ä¼ é€’é—­åŒ… | DAG | å¤§ | NÂ² | **æ‹“æ‰‘+Bitset** |
| ä¼ é€’é—­åŒ… | ä¸€èˆ¬å›¾ | å° | NÂ² | **Floyd** |

---

## å››ã€Bitsetä½¿ç”¨æ¡ä»¶

**å¿…é¡»åŒæ—¶æ»¡è¶³ï¼š**

1. âœ… **éœ€è¦é›†åˆæ“ä½œ**ï¼ˆå¹¶ã€äº¤ã€è®¡æ•°ï¼‰
2. âœ… **å¤§è§„æ¨¡æ•°æ®**ï¼ˆN â‰¥ 10000ï¼‰
3. âœ… **æ—¶é—´ç´§å¼ **ï¼ˆæ™®é€šæ–¹æ³•ä¼šTLEï¼‰
4. âœ… **DAGæˆ–æœ‰å¥½çš„å¤„ç†é¡ºåº**

**å…¸å‹åº”ç”¨ï¼š**
- DAGä¼ é€’é—­åŒ…
- å­é›†DPä¼˜åŒ–
- çŠ¶æ€å‹ç¼©DP
- å¤§è§„æ¨¡å¯è¾¾æ€§åˆ†æ

---

## äº”ã€å®æˆ˜ä¾‹é¢˜åˆ†ç±»

### ç”¨ DFS/BFS
- å²›å±¿æ•°é‡
- è¿·å®«é—®é¢˜
- äºŒåˆ†å›¾åˆ¤å®š
- æ— æƒå›¾æœ€çŸ­è·¯

### ç”¨ DFSè®°å¿†åŒ–
- ä¸­ç­‰è§„æ¨¡å›¾çš„å¯è¾¾æ€§
- è®°å¿†åŒ–æœç´¢
- æ ‘å½¢DP

### ç”¨ æ‹“æ‰‘+Bitset
- **æœ¬é¢˜ï¼šDAGå¯è¾¾ç‚¹ç»Ÿè®¡**
- è¯¾ç¨‹å®‰æ’é—®é¢˜ï¼ˆä¾èµ–å…³ç³»ï¼‰
- æœ‰å‘æ— ç¯å›¾çš„ä¼ é€’é—­åŒ…
- å¤§è§„æ¨¡ç»§æ‰¿å…³ç³»æŸ¥è¯¢

### ç”¨ æ‹“æ‰‘+DP
- DAGæœ€é•¿è·¯
- å·¥ç¨‹æ’æœŸï¼ˆå…³é”®è·¯å¾„ï¼‰
- ä¾èµ–å…³ç³»çš„æœ€ä¼˜åŒ–

---

## å…­ã€è®°å¿†å£è¯€

```
å•ç‚¹æŸ¥è¯¢ DFS/BFS
å…¨å±€æœ‰ç¯ åŠ è®°å¿†åŒ–
å…¨å±€æ— ç¯ æ‹“æ‰‘æ’åº
æ•°æ®å·¨å¤§ BitsetåŠ æŒ
```

---

## ä¸ƒã€æ€§èƒ½å¯¹æ¯”ï¼ˆN=30000, M=30000ï¼‰

| ç®—æ³• | æ—¶é—´å¤æ‚åº¦ | å®é™…æ“ä½œæ•° | ç»“æœ |
|------|-----------|-----------|------|
| æœ´ç´ DFSÃ—N | O(NÂ²) | 9Ã—10â¸ | âŒ TLE |
| DFSè®°å¿†åŒ–(æ— bitset) | O(NÃ—M) | 9Ã—10â¸ | âŒ TLE |
| æ‹“æ‰‘+æ™®é€šé›†åˆ | O(MÃ—N) | 9Ã—10â¸ | âŒ TLE |
| **æ‹“æ‰‘+Bitset** | O(MÃ—N/64) | **1.4Ã—10â·** | âœ… AC |
| **DFSè®°å¿†åŒ–+Bitset** | O(MÃ—N/64) | **1.4Ã—10â·** | âœ… AC |

å…³é”®ï¼š**64å€ä¼˜åŒ–**ä½¿ä¸å¯èƒ½å˜å¯èƒ½ï¼


âœ¨ *End of Graph Theory Summary*
